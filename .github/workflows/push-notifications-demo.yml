name: 'push-notifications-demo'

on:
  # Ensure the build runs on pull requests.
  pull_request:

  # Ensure the build runs when pushed to the main branch.
  push:
    branches:
      - main

jobs:
  build:
    runs-on: 'ubuntu-latest'

    name: 'build (${{ matrix.service-name }})'

    strategy:
      matrix:
        include:
          - service-name: 'api'
          - service-name: 'build'

    steps:
      - name: '📥 Clone Repository'
        uses: actions/checkout@v3

      - name: '🏗️ Build'
        run: >-
          docker-compose build ${{ matrix.service-name }}

      - name: '🐳 Run'
        run: >-
          docker-compose run -d ${{ matrix.service-name }}
